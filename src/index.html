<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <title>PA Permit Test Practice</title>
</head>

<body>

  <div class="home-box custom-box">
    <h4>Instruction</h4>
    <p>Total number of questions: <span class="total-question"> 16 </span> </p>
    <button type="button" class="main-button" onclick="getNewQuestion()">Get Started!</button>
  </div>
  <div class="quiz-container custom-box">
    <div class="question-number"></div>

    <div class="question-text"> </div>
    <div class="options-container"></div>

    <div class="next-question-button">
      <button type="button" class="next-button" onclick="getNewQuestion()">Next Question</button>
    </div>

    <div class="answers-indicator"></div>

    <div class="result-container"></div>
  </div>

<script>
      //window.onload = function () {
      const questionNumber = document.querySelector(".question-number");
      const questionText = document.querySelector(".question-text");
      const optionContainer = document.querySelector(".options-container");
      const resultContainer = document.querySelector('.result-container');
      const quizContainer = document.querySelector('.quiz-container');

      let questionCounter = 0;
      let userAnswers = [];
      let totalQuestions = 16;
      let currentQuestion;
      let quiz;


      function setAvailableQuestions() {
        const quiz = [
        {
    question: "THE MINIMUM DRINKING AGE IN THIS STATE IS ____ YEARS.",
    options: ["9", "20", "21", "18" ],
    answer: 2
},
{
    question: "PEOPLE UNDER 16 YEARS OF AGE WHO USE A FALSE IDENTIFICATION CARD TO BUY ALCOHOL WILL.",
    options: ["Receive a driving suspension that starts on their 16th birthday", "Not be able to take the driver’s exam until their 21st birthday", "Receive a driving suspension that starts on their 21st birthday", "Be sent to an alcohol safety education class" ],
    answer: 0
},

{
    question: "IF A PERSON UNDER 21 YEARS OLD CONSUMES ALCOHOL, BUT IS NOT DRIVING A MOTOR VEHICLE, THE PENALTY FOR A FIRST OFFENSE IS:",
    options: ["A 90-day driver license suspension and up to a $500 fine", "A 6-month probation", "Sentence to a corrections institution", "Points on the driving record" ],
    answer: 0
},

{
    question: "PARENTAL CONSENT TO CONDUCT BREATH, BLOOD, AND URINE TESTS IS:",
    options: ["Not required", "Required from only one parent", "Required for people under 16 years old", "Required from both parents" ],
    answer: 0
},

{
    question: "IT IS AGAINST THE LAW FOR ANYONE UNDER THE AGE OF 21 TO ______ ALCOHOL",
    options: ["Wear clothing advertising", "Be in the presence of", "Consume", "Serve" ],
    answer: 2
},

{
    question: "IT IS AGAINST THE LAW FOR ANYONE UNDER THE AGE OF 21 TO ______ ALCOHOL",
    options: ["Wear clothing advertising", "Possess", "Serve", "Be in the presence of" ],
    answer: 1
},


{
    question: "IT IS AGAINST THE LAW FOR ANYONE UNDER THE AGE OF 21 TO ______ ALCOHOL",
    options: ["Serve", "Wear clothing advertising", "Be in the presence of", "Transport" ],
    answer: 3
},


{
    question: "ONE OF THE PENALTIES FOR DRIVING UNDER THE INFLUENCE OF ALCOHOL IS A(N):",
    options: ["5 – year driver’s license suspension", "$100.00 fine", "Attendance to Alcohol Highway Safety School", "12 – hour sentence in jail" ],
    answer: 2
},

{
    question: "IF YOU ARE ARRESTED FOR DRIVING UNDER THE INFLUENCE OF ALCOHOL AND YOU REFUSE TO TAKE THE BLOOD TEST, YOU WILL RECIEVE A:",
    options: ["Drug counseling treatment", "Sentence of one day in jail", "Driver’s License Suspension", "$300.00 fine" ],
    answer: 2
},


{
    question: "IF A POLICE OFFICER REQUIRES YOU TO TAKE A BLOOD, BREATH, OR URINE TEST, YOU:",
    options: ["May choose the test you prefer", "May choose the test you prefer", "May refuse if underage", "Must take the test, or your license will be suspended" ],
    answer: 3
},

{
    question: "FOR A FIRST CONVICTION FOR DRIVING UNDER THE INFLUENCE AT ANY BLOOD ALCOHOL CONCENTRATION LEVEL, YOU COULD",
    options: ["Lose your license for up to 5 years", "Be required to conduct a public education class on the dangers of drunk driving", "Be required to drive with a restricted occupational license", "Pay a fine of at least $300" ],
    answer: 3
},


{
    question: "IF UNDER 21 YEARS OF AGE YOU ARE CONSIDERED TO BE DRIVING WHILE UNDER THE INFLUENCE IF YOUR BLOOD ALCOHOL LEVEL IS:",
    options: [".08% or higher", ".10% or higher", ".05% or higher", ".02% or higher" ],
    answer: 3
},

{
    question: "IF YOU ARE UNDER AGE 21 AND ARE CONVICTED OF DRIVING UNDER THE INFLUENCE OF ALCOHOL, YOU WILL RECEIVE A ____ LICENSE SUSPENSION FOR A FIRST OFFENSE",
    options: ["60-Day", "30-Day", "6-Month", "1-Year" ],
    answer: 3
},

{
    question: "IF YOU ARE UNDER AGE 21, AND ARE CONVICTED OF CARRYING A FALSE ID CARD, YOU WILL BE REQUIRED TO PAY A $500 FINE AND YOUR LICENSE WILL BE SUSPENDED FOR 90 DAYS.",
    options: ["Only if your blood alcohol content (BAC) is .02% or higher", "Even if you were not driving", "Only if you were driving at the time of arrest", "Only if your blood alcohol content (BAC) is .02% or higher and you were driving at the time of arrest" ],
    answer: 1
},

{
    question: "THE ZERO TOLERANCE LAW REDUCED THE BLOOD ALCOHOL CONTENT (BAC) FROM .08% TO ____ FOR DRIVERS UNDER 21 TO BE CHARGED WITH DRIVING UNDER THE INFLUENCE.",
    options: [".02%", ".05%", ".07%", ".00%" ],
    answer: 0
},

{
    question: "IF YOU ARE STOPPED BY A POLICE OFFICER, YOU SHOULD:",
    options: ["Unbuckle your seat belt and lower your window", "Get your paperwork ready before the officer reaches your car", "Stay in your vehicle with your hands on the steering wheel, and wait for the officer to approach you", "Get out of your car and walk toward the patrol car" ],
    answer: 2
}
        ];
        return quiz;
      }
  // Move getNewQuestion to the global scope
  function getNewQuestion() {
    resultContainer.style.display = 'none';
    quizContainer.style.display = 'block';

    if (questionCounter >= totalQuestions) {
      displayResult();
    } else {
      const questionIndex = Math.floor(Math.random() * quiz.length);
      currentQuestion = quiz[questionIndex];
      questionText.innerHTML = currentQuestion.question;

      optionContainer.innerHTML = "";

      currentQuestion.options.forEach((option, i) => {

      const optionElement = document.createElement('div');
      optionElement.innerHTML = option;
      optionElement.className = "option";
      optionElement.addEventListener("click", function () {

      const isCorrect = i === currentQuestion.answer;

        if (isCorrect) {
          optionElement.classList.add("correct");
        } else {
          optionElement.classList.add("incorrect");
          // Highlight the correct answer
          optionContainer.children[currentQuestion.answer].classList.add("correct");
        }

        userAnswers.push({ index: i, isCorrect });
        questionCounter++;

// Highlight correct answer even if the user selected the wrong one
optionContainer.children[currentQuestion.answer].classList.add("correct");

// Remove event listeners to prevent further interaction
optionContainer.querySelectorAll(".option").forEach((opt) => {
  opt.style.pointerEvents = "none"; // Disable further clicks
});


        setTimeout(getNewQuestion); 
      });
        optionContainer.appendChild(optionElement);
      });
    }
  }

  function displayResult() {
    let correctAnswers = 0;

    for (let i = 0; i < userAnswers.length; i++) {
      const currentQuestion = quiz[i];

      if (currentQuestion && currentQuestion.hasOwnProperty('answer') && userAnswers[i] === currentQuestion.answer) {
        correctAnswers++;
      }
    }

    resultContainer.innerHTML = `You answered ${correctAnswers} out of ${quiz.length} questions correctly.`;
    resultContainer.style.display = 'block';
    quizContainer.style.display = 'none';
  }

  window.onload = function () {
    quiz = setAvailableQuestions();
    // getNewQuestion(); // Commented this line, as you don't want to automatically load a question on page load
  };
</script>

</body>

</html>
